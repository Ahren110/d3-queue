(function(){function b(b){function l(a,b){i=a,j=b}function m(){if(g&&d<b){var c=g,f=c.args[0],i=a.call(c.args,1),l=c.index;g==h?g=h=null:g=g.next,++d,i.push(function(a,b){--d,a?e&&(e=0,g=h=null,k(a,null)):(j[l]=b,--e?m():k(null,j))}),f.apply(null,i)}}var c={},d=0,e=0,f=-1,g,h,i=null,j=[],k=l;return b||(b=Infinity),c.defer=function(){var a={index:++f,args:arguments,next:null};return h?(h.next=a,h=h.next):g=h=a,++e,m(),c},c.await=function(a){return k=a,e||k(i,j),c},c}typeof module=="undefined"?self.queue=b:module.exports=b;var a=Array.prototype.slice;b.version="0.0.1"})();